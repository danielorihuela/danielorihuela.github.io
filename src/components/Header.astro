---
const navItems = [
	{ name: "Home", path: "/" },
	{ name: "About", path: "/about/" },
	{ name: "Blog", path: "/blog/" },
	{ name: "Open Source", path: "/open-source/" },
];

const currentPath = Astro.url.pathname;
---

<header class="px-4 py-0">
	<nav
		class="fixed top-0 left-0 right-0 z-50 transition-all duration-500 bg-black/90 backdrop-blur-md border-b border-royalPurple/50"
	>
		<div class="max-w-7xl mx-auto px-6 lg:px-8">
			<div class="flex items-center justify-between h-20">
				{/* Logo */}
				<a
					href="/"
					class="text-2xl font-bold text-white hover:text-cyan-400 transition-colors duration-300"
				>
					<span class="text-royalPurple">&lt;</span>
					DO
					<span class="text-royalPurple">/&gt;</span>
				</a>

				{/* Desktop Navigation */}
				<div class="hidden md:flex items-center space-x-8">
					{navItems.map((item) => (
						<a
							href={item.path}
							class={`relative px-4 duration-300 group font-[Iceland] ${
								currentPath === item.path
									? "text-cyan-400"
									: "text-gray-300 hover:text-white"
							}`}
						>
							{item.name}
							<span
								class={`absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-royalPurple to-cyan-400 transform transition-transform duration-300 ${
									currentPath === item.path
										? "scale-x-100"
										: "scale-x-0 group-hover:scale-x-100"
								}`}
							/>
						</a>
					))}
				</div>

				{/* Mobile menu button */}
				<button
					id="mobile-menu-button"
					class="md:hidden text-white hover:text-cyan-400 transition-colors duration-300"
				>
					<svg
						id="menu-icon"
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						class="w-6 h-6"
					>
						<path
							id="menu-path"
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M4 6h16M4 12h16m-7 6h7"
						></path>
					</svg>
				</button>
			</div>

			{/* Mobile Navigation */}
			<div
				id="mobile-menu"
				class="md:hidden transition-all duration-300 overflow-hidden max-h-0 opacity-0"
			>
				<div
					class="py-4 space-y-2 bg-black/95 backdrop-blur-md rounded-lg mt-2 border border-purple-900/30"
				>
					{navItems.map((item) => (
						<a
							href={item.path}
							id="menu-item"
							class={`block px-6 py-3 text-sm font-medium transition-colors duration-300 ${
								currentPath === item.path
									? "text-cyan-400 bg-purple-900/20"
									: "text-gray-300 hover:text-white hover:bg-gray-800/50"
							}`}
						>
							{item.name}
						</a>
					))}
				</div>
			</div>
		</div>
	</nav>

	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const mobileMenuButton = document.getElementById("mobile-menu-button");
			const menuIconPath = document.getElementById("menu-path");
			if (!mobileMenuButton || !menuIconPath) return;

			mobileMenuButton.addEventListener("click", () => {
				const mobileMenu = document.getElementById("mobile-menu");
				if (!mobileMenu) return;

				if (mobileMenu.classList.contains("max-h-0")) {
					// Show menu
					mobileMenu.classList.remove("max-h-0", "opacity-0");
					mobileMenu.classList.add("max-h-96", "opacity-100");

					// Change icon to "X"
					menuIconPath.setAttribute(
						"d",
						"M6 18L18 6M6 6l12 12"
					); // X icon path
				} else {
					// Hide menu
					mobileMenu.classList.remove("max-h-96", "opacity-100");
					mobileMenu.classList.add("max-h-0", "opacity-0");

					// Change icon back to menu
					menuIconPath.setAttribute(
						"d",
						"M4 6h16M4 12h16m-7 6h7"
					); // Menu icon path
				}
			});
		});
	</script>
</header>
